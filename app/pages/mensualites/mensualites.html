<ion-header>
    <ion-navbar primary>
        <button menuToggle>
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-title>Mensualités</ion-title>
    </ion-navbar>
</ion-header>
<ion-content padding  class="mensualites">
    <ion-list *ngIf="datas">
        <ion-item >
            <ion-label floating >
                <ion-icon name="logo-euro"></ion-icon>
              Montant du prêt</ion-label>
             <ion-input   [(ngModel)]="datas.montant" #montant (keyup)="onKey('montant', montant.value)" type="number" ></ion-input>
        </ion-item>
        <ion-item>
            <ion-label floating >
                <ion-icon name="logo-euro"></ion-icon>
              Apport</ion-label>
             <ion-input  [(ngModel)]="datas.apport" (keyup)="onKey('apport', apport.value)" #apport type="number"    ></ion-input>
        </ion-item>
        <ion-item>

         <ion-label floating class="labelRange">Durée du prêt (en années)</ion-label>
         <ion-range min="2" max="30" pin="true" #duree  [(ngModel)]="datas.duree" (ionChange)="onKey('duree', duree.value)">
           <ion-icon class="labelRange" range-left small name="timer"></ion-icon>
           <ion-icon class="labelRange" range-right name="timer"></ion-icon>
         </ion-range> 

        </ion-item>
        <ion-item>
            <ion-label floating>
                <ion-icon name="trending-up"></ion-icon>
                Taux d'intérêt (%)</ion-label>
            <ion-input [(ngModel)]="datas.interets" #interets (keyup)="onKey('interets', interets.value)" type="number" ></ion-input>
        </ion-item>
        <ion-item>
            <ion-label floating>
                <ion-icon name="home"></ion-icon>
                Taux d'assurance (%)</ion-label>
            <ion-input  [(ngModel)]="datas.assurance" #assurance (keyup)="onKey('assurance', assurance.value)" type="number" max="2" ></ion-input>
        </ion-item>
        <ion-item>
            <ion-label floating>
                <ion-icon name="briefcase"></ion-icon>
                Frais de dossier (€)</ion-label>
            <ion-input [(ngModel)]="datas.dossier"  #dossier (keyup)="onKey('dossier', dossier.value)" type="number"></ion-input>
        </ion-item>
        <ion-item>
           <ion-label floating>
               <ion-icon name="key"></ion-icon>
               Frais de caution (€)</ion-label>
           <ion-input [(ngModel)]="datas.caution" disabled #caution  type="number" ></ion-input>
       </ion-item> 
        <ion-item>
           <ion-label floating>
               <ion-icon name="brush"></ion-icon>
               Frais de notaire (€)</ion-label>
           <ion-input [(ngModel)]="datas.notaire"  #notaire (keyup)="onKey('notaire', notaire.value)" type="number" ></ion-input>
       </ion-item> 
   </ion-list>

<h5><b>Mensualités :</b></h5>

<div *ngIf="datas && datas.duree > 0 && datas.interets >  0">
<b>{{result}} €</b><br>
<button primary (click)="openDevis()">Faire une demande de devis</button>
<!--  {{
   (assuranceMois +
(
(( (datas.montant-datas.apport) + r) * ((datas.interets/100)/12))
/(1-
(math.pow((1+((datas.interets/100)/12)),-(datas.duree*12)))
)
)
) | number:'.0-0'
}} €  -->
</div>

 <div *ngIf="montantAssurance">Le coût total de l'assurance sera de <b>{{montantAssurance}} €</b> soit <b>{{assuranceMois}} €</b> par mois
</div>


</ion-content>
